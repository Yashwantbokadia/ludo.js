!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Ludo=t()}}(function(){var e;return function n(t,e,r){function i(s,a){if(!e[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=e[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return i(n?n:e)},c,c.exports,n,t,e,r)}return e[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){n.Game=t("./src/game").Game,n.Player=t("./src/player").Player,n.Token=t("./src/token").Token,n.Dice=t("./src/dice").Dice,n.utils=t("./src/utils")},{"./src/dice":9,"./src/game":10,"./src/player":11,"./src/token":12,"./src/utils":13}],2:[function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function i(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!i(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,i,a,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,a=new Array(i-1),u=1;i>u;u++)a[u-1]=arguments[u];n.apply(this,a)}else if(o(n)){for(i=arguments.length,a=new Array(i-1),u=1;i>u;u++)a[u-1]=arguments[u];for(l=n.slice(),i=l.length,u=0;i>u;u++)l[u].apply(this,a)}return!0},n.prototype.addListener=function(t,e){var i;if(!r(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned){var i;i=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var i=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,i,s,a;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],s=n.length,i=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(a=s;a-->0;)if(n[a]===e||n[a].listener&&n[a].listener===e){i=a;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.listenerCount=function(t,e){var n;return n=t._events&&t._events[e]?r(t._events[e])?1:t._events[e].length:0}},{}],3:[function(t,e){e.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],4:[function(t,e){function n(){}var r=e.exports={};r.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.MutationObserver,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};var r=[];if(e){var i=document.createElement("div"),o=new MutationObserver(function(){var t=r.slice();r.length=0,t.forEach(function(t){t()})});return o.observe(i,{attributes:!0}),function(t){r.length||i.setAttribute("yes","no"),r.push(t)}}return n?(window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(t){r.push(t),window.postMessage("process-tick","*")}):function(t){setTimeout(t,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=n,r.addListener=n,r.once=n,r.off=n,r.removeListener=n,r.removeAllListeners=n,r.emit=n,r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")}},{}],5:[function(t,e){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],6:[function(t,e,n){(function(e,r){function i(t,e){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),y(e)?r.showHidden=e:e&&n._extend(r,e),T(r.showHidden)&&(r.showHidden=!1),T(r.depth)&&(r.depth=2),T(r.colors)&&(r.colors=!1),T(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),u(r,t,r.depth)}function o(t,e){var n=i.styles[e];return n?"["+i.colors[n][0]+"m"+t+"["+i.colors[n][1]+"m":t}function s(t){return t}function a(t){var e={};return t.forEach(function(t){e[t]=!0}),e}function u(t,e,r){if(t.customInspect&&e&&x(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(r,t);return b(i)||(i=u(t,i,r)),i}var o=l(t,e);if(o)return o;var s=Object.keys(e),y=a(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),k(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return c(e);if(0===s.length){if(x(e)){var g=e.name?": "+e.name:"";return t.stylize("[Function"+g+"]","special")}if(_(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(E(e))return t.stylize(Date.prototype.toString.call(e),"date");if(k(e))return c(e)}var v="",m=!1,w=["{","}"];if(d(e)&&(m=!0,w=["[","]"]),x(e)){var T=e.name?": "+e.name:"";v=" [Function"+T+"]"}if(_(e)&&(v=" "+RegExp.prototype.toString.call(e)),E(e)&&(v=" "+Date.prototype.toUTCString.call(e)),k(e)&&(v=" "+c(e)),0===s.length&&(!m||0==e.length))return w[0]+v+w[1];if(0>r)return _(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var O;return O=m?h(t,e,r,y,s):s.map(function(n){return p(t,e,r,y,n,m)}),t.seen.pop(),f(O,v,w)}function l(t,e){if(T(e))return t.stylize("undefined","undefined");if(b(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return m(e)?t.stylize(""+e,"number"):y(e)?t.stylize(""+e,"boolean"):g(e)?t.stylize("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,r,i){for(var o=[],s=0,a=e.length;a>s;++s)o.push(L(e,String(s))?p(t,e,n,r,String(s),!0):"");return i.forEach(function(i){i.match(/^\d+$/)||o.push(p(t,e,n,r,i,!0))}),o}function p(t,e,n,r,i,o){var s,a,l;if(l=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},l.get?a=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(a=t.stylize("[Setter]","special")),L(r,i)||(s="["+i+"]"),a||(t.seen.indexOf(l.value)<0?(a=g(n)?u(t,l.value,null):u(t,l.value,n-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),T(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function f(t,e,n){var r=0,i=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function d(t){return Array.isArray(t)}function y(t){return"boolean"==typeof t}function g(t){return null===t}function v(t){return null==t}function m(t){return"number"==typeof t}function b(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function T(t){return void 0===t}function _(t){return O(t)&&"[object RegExp]"===N(t)}function O(t){return"object"==typeof t&&null!==t}function E(t){return O(t)&&"[object Date]"===N(t)}function k(t){return O(t)&&("[object Error]"===N(t)||t instanceof Error)}function x(t){return"function"==typeof t}function A(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function N(t){return Object.prototype.toString.call(t)}function S(t){return 10>t?"0"+t.toString(10):t.toString(10)}function j(){var t=new Date,e=[S(t.getHours()),S(t.getMinutes()),S(t.getSeconds())].join(":");return[t.getDate(),R[t.getMonth()],e].join(" ")}function L(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var P=/%[sdj%]/g;n.format=function(t){if(!b(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(i(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,o=r.length,s=String(t).replace(P,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return t}}),a=r[n];o>n;a=r[++n])s+=g(a)||!O(a)?" "+a:" "+i(a);return s},n.deprecate=function(t,i){function o(){if(!s){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),s=!0}return t.apply(this,arguments)}if(T(r.process))return function(){return n.deprecate(t,i).apply(this,arguments)};if(e.noDeprecation===!0)return t;var s=!1;return o};var D,C={};n.debuglog=function(t){if(T(D)&&(D=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!C[t])if(new RegExp("\\b"+t+"\\b","i").test(D)){var r=e.pid;C[t]=function(){var e=n.format.apply(n,arguments);console.error("%s %d: %s",t,r,e)}}else C[t]=function(){};return C[t]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=d,n.isBoolean=y,n.isNull=g,n.isNullOrUndefined=v,n.isNumber=m,n.isString=b,n.isSymbol=w,n.isUndefined=T,n.isRegExp=_,n.isObject=O,n.isDate=E,n.isError=k,n.isFunction=x,n.isPrimitive=A,n.isBuffer=t("./support/isBuffer");var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",j(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n._extend=function(t,e){if(!e||!O(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":5,_process:4,inherits:3}],7:[function(t,n,r){!function(t,i){"use strict";"function"==typeof e&&e.amd?e(i):"object"==typeof r?n.exports=i():t.returnExports=i()}(this,function(){function t(t){var e=+t;return e!==e?e=0:0!==e&&e!==1/0&&e!==-(1/0)&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e}function e(t){var e=typeof t;return null===t||"undefined"===e||"boolean"===e||"number"===e||"string"===e}function n(t){var n,r,i;if(e(t))return t;if(r=t.valueOf,y(r)&&(n=r.call(t),e(n)))return n;if(i=t.toString,y(i)&&(n=i.call(t),e(n)))return n;throw new TypeError}var r,i=Array.prototype,o=Object.prototype,s=Function.prototype,a=String.prototype,u=Number.prototype,l=i.slice,c=i.splice,h=i.push,p=i.unshift,f=s.call,d=o.toString,y=function(t){return"[object Function]"===d.call(t)},g=function(t){return"[object RegExp]"===d.call(t)},v=function(t){return"[object Array]"===d.call(t)},m=function(t){return"[object String]"===d.call(t)},b=function(t){var e=d.call(t),n="[object Arguments]"===e;return n||(n=!v(t)&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&y(t.callee)),n},w=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(t){return!1}}();r=w?function(t,e,n,r){!r&&e in t||Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(t,e,n,r){!r&&e in t||(t[e]=n)};var T=function(t,e,n){for(var i in e)o.hasOwnProperty.call(e,i)&&r(t,i,e[i],n)},_={ToObject:function(t){if(null==t)throw new TypeError("can't convert "+t+" to object");return Object(t)},ToUint32:function(t){return t>>>0}},O=function(){};T(s,{bind:function(t){var e=this;if(!y(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var n,r=l.call(arguments,1),i=function(){if(this instanceof n){var i=e.apply(this,r.concat(l.call(arguments)));return Object(i)===i?i:this}return e.apply(t,r.concat(l.call(arguments)))},o=Math.max(0,e.length-r.length),s=[],a=0;o>a;a++)s.push("$"+a);return n=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this, arguments); }")(i),e.prototype&&(O.prototype=e.prototype,n.prototype=new O,O.prototype=null),n}});var E=f.bind(o.hasOwnProperty),k=function(){var t=[1,2],e=t.splice();return 2===t.length&&v(e)&&0===e.length}();T(i,{splice:function(){return 0===arguments.length?[]:c.apply(this,arguments)}},k);var x=function(){var t={};return i.splice.call(t,0,0,1),1===t.length}();T(i,{splice:function(e,n){if(0===arguments.length)return[];var r=arguments;return this.length=Math.max(t(this.length),0),arguments.length>0&&"number"!=typeof n&&(r=l.call(arguments),r.length<2?r.push(this.length-e):r[1]=t(n)),c.apply(this,r)}},!x);var A=1!==[].unshift(0);T(i,{unshift:function(){return p.apply(this,arguments),this.length}},A),T(Array,{isArray:v});var N=Object("a"),S="a"!==N[0]||!(0 in N),j=function(t){var e=!0,n=!0;return t&&(t.call("foo",function(t,n,r){"object"!=typeof r&&(e=!1)}),t.call([1],function(){"use strict";n="string"==typeof this},"x")),!!t&&e&&n};T(i,{forEach:function(t){var e=_.ToObject(this),n=S&&m(this)?this.split(""):e,r=arguments[1],i=-1,o=n.length>>>0;if(!y(t))throw new TypeError;for(;++i<o;)i in n&&t.call(r,n[i],i,e)}},!j(i.forEach)),T(i,{map:function(t){var e=_.ToObject(this),n=S&&m(this)?this.split(""):e,r=n.length>>>0,i=Array(r),o=arguments[1];if(!y(t))throw new TypeError(t+" is not a function");for(var s=0;r>s;s++)s in n&&(i[s]=t.call(o,n[s],s,e));return i}},!j(i.map)),T(i,{filter:function(t){var e,n=_.ToObject(this),r=S&&m(this)?this.split(""):n,i=r.length>>>0,o=[],s=arguments[1];if(!y(t))throw new TypeError(t+" is not a function");for(var a=0;i>a;a++)a in r&&(e=r[a],t.call(s,e,a,n)&&o.push(e));return o}},!j(i.filter)),T(i,{every:function(t){var e=_.ToObject(this),n=S&&m(this)?this.split(""):e,r=n.length>>>0,i=arguments[1];if(!y(t))throw new TypeError(t+" is not a function");for(var o=0;r>o;o++)if(o in n&&!t.call(i,n[o],o,e))return!1;return!0}},!j(i.every)),T(i,{some:function(t){var e=_.ToObject(this),n=S&&m(this)?this.split(""):e,r=n.length>>>0,i=arguments[1];if(!y(t))throw new TypeError(t+" is not a function");for(var o=0;r>o;o++)if(o in n&&t.call(i,n[o],o,e))return!0;return!1}},!j(i.some));var L=!1;i.reduce&&(L="object"==typeof i.reduce.call("es5",function(t,e,n,r){return r})),T(i,{reduce:function(t){var e=_.ToObject(this),n=S&&m(this)?this.split(""):e,r=n.length>>>0;if(!y(t))throw new TypeError(t+" is not a function");if(!r&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var i,o=0;if(arguments.length>=2)i=arguments[1];else for(;;){if(o in n){i=n[o++];break}if(++o>=r)throw new TypeError("reduce of empty array with no initial value")}for(;r>o;o++)o in n&&(i=t.call(void 0,i,n[o],o,e));return i}},!L);var P=!1;i.reduceRight&&(P="object"==typeof i.reduceRight.call("es5",function(t,e,n,r){return r})),T(i,{reduceRight:function(t){var e=_.ToObject(this),n=S&&m(this)?this.split(""):e,r=n.length>>>0;if(!y(t))throw new TypeError(t+" is not a function");if(!r&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var i,o=r-1;if(arguments.length>=2)i=arguments[1];else for(;;){if(o in n){i=n[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value")}if(0>o)return i;do o in n&&(i=t.call(void 0,i,n[o],o,e));while(o--);return i}},!P);var D=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);T(i,{indexOf:function(e){var n=S&&m(this)?this.split(""):_.ToObject(this),r=n.length>>>0;if(!r)return-1;var i=0;for(arguments.length>1&&(i=t(arguments[1])),i=i>=0?i:Math.max(0,r+i);r>i;i++)if(i in n&&n[i]===e)return i;return-1}},D);var C=Array.prototype.lastIndexOf&&-1!==[0,1].lastIndexOf(0,-3);T(i,{lastIndexOf:function(e){var n=S&&m(this)?this.split(""):_.ToObject(this),r=n.length>>>0;if(!r)return-1;var i=r-1;for(arguments.length>1&&(i=Math.min(i,t(arguments[1]))),i=i>=0?i:r-Math.abs(i);i>=0;i--)if(i in n&&e===n[i])return i;return-1}},C);var R=!{toString:null}.propertyIsEnumerable("toString"),B=function(){}.propertyIsEnumerable("prototype"),I=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],M=I.length;T(Object,{keys:function(t){var e=y(t),n=b(t),r=null!==t&&"object"==typeof t,i=r&&m(t);if(!r&&!e&&!n)throw new TypeError("Object.keys called on a non-object");var o=[],s=B&&e;if(i||n)for(var a=0;a<t.length;++a)o.push(String(a));else for(var u in t)s&&"prototype"===u||!E(t,u)||o.push(String(u));if(R)for(var l=t.constructor,c=l&&l.prototype===t,h=0;M>h;h++){var p=I[h];c&&"constructor"===p||!E(t,p)||o.push(p)}return o}});var F=Object.keys&&function(){return 2===Object.keys(arguments).length}(1,2),U=Object.keys;T(Object,{keys:function(t){return U(b(t)?i.slice.call(t):t)}},!F);var z=-621987552e5,G="-000001",K=Date.prototype.toISOString&&-1===new Date(z).toISOString().indexOf(G);T(Date.prototype,{toISOString:function(){var t,e,n,r,i;if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");for(r=this.getUTCFullYear(),i=this.getUTCMonth(),r+=Math.floor(i/12),i=(i%12+12)%12,t=[i+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],r=(0>r?"-":r>9999?"+":"")+("00000"+Math.abs(r)).slice(r>=0&&9999>=r?-4:-6),e=t.length;e--;)n=t[e],10>n&&(t[e]="0"+n);return r+"-"+t.slice(0,2).join("-")+"T"+t.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"}},K);var H=!1;try{H=Date.prototype.toJSON&&null===new Date(0/0).toJSON()&&-1!==new Date(z).toJSON().indexOf(G)&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(J){}H||(Date.prototype.toJSON=function(){var t,e=Object(this),r=n(e);if("number"==typeof r&&!isFinite(r))return null;if(t=e.toISOString,"function"!=typeof t)throw new TypeError("toISOString property is not callable");return t.call(e)});var V=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),$=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z")),Y=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));(!Date.parse||Y||$||!V)&&(Date=function(t){function e(n,r,i,o,s,a,u){var l=arguments.length;if(this instanceof t){var c=1===l&&String(n)===n?new t(e.parse(n)):l>=7?new t(n,r,i,o,s,a,u):l>=6?new t(n,r,i,o,s,a):l>=5?new t(n,r,i,o,s):l>=4?new t(n,r,i,o):l>=3?new t(n,r,i):l>=2?new t(n,r):l>=1?new t(n):new t;return c.constructor=e,c}return t.apply(this,arguments)}function n(t,e){var n=e>1?1:0;return o[e]+Math.floor((t-1969+n)/4)-Math.floor((t-1901+n)/100)+Math.floor((t-1601+n)/400)+365*(t-1970)}function r(e){return Number(new t(1970,0,1,0,0,0,e))}var i=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),o=[0,31,59,90,120,151,181,212,243,273,304,334,365];for(var s in t)e[s]=t[s];return e.now=t.now,e.UTC=t.UTC,e.prototype=t.prototype,e.prototype.constructor=e,e.parse=function(e){var o=i.exec(e);if(o){var s,a=Number(o[1]),u=Number(o[2]||1)-1,l=Number(o[3]||1)-1,c=Number(o[4]||0),h=Number(o[5]||0),p=Number(o[6]||0),f=Math.floor(1e3*Number(o[7]||0)),d=Boolean(o[4]&&!o[8]),y="-"===o[9]?1:-1,g=Number(o[10]||0),v=Number(o[11]||0);return(h>0||p>0||f>0?24:25)>c&&60>h&&60>p&&1e3>f&&u>-1&&12>u&&24>g&&60>v&&l>-1&&l<n(a,u+1)-n(a,u)&&(s=60*(24*(n(a,u)+l)+c+g*y),s=1e3*(60*(s+h+v*y)+p)+f,d&&(s=r(s)),s>=-864e13&&864e13>=s)?s:0/0}return t.parse.apply(this,arguments)},e}(Date)),Date.now||(Date.now=function(){return(new Date).getTime()});var Z=u.toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==0xde0b6b3a7640080.toFixed(0)),q={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function(t,e){for(var n=-1;++n<q.size;)e+=t*q.data[n],q.data[n]=e%q.base,e=Math.floor(e/q.base)},divide:function(t){for(var e=q.size,n=0;--e>=0;)n+=q.data[e],q.data[e]=Math.floor(n/t),n=n%t*q.base},numToString:function(){for(var t=q.size,e="";--t>=0;)if(""!==e||0===t||0!==q.data[t]){var n=String(q.data[t]);""===e?e=n:e+="0000000".slice(0,7-n.length)+n}return e},pow:function ue(t,e,n){return 0===e?n:e%2===1?ue(t,e-1,n*t):ue(t*t,e/2,n)},log:function(t){for(var e=0;t>=4096;)e+=12,t/=4096;for(;t>=2;)e+=1,t/=2;return e}};T(u,{toFixed:function(t){var e,n,r,i,o,s,a,u;if(e=Number(t),e=e!==e?0:Math.floor(e),0>e||e>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(n=Number(this),n!==n)return"NaN";if(-1e21>=n||n>=1e21)return String(n);if(r="",0>n&&(r="-",n=-n),i="0",n>1e-21)if(o=q.log(n*q.pow(2,69,1))-69,s=0>o?n*q.pow(2,-o,1):n/q.pow(2,o,1),s*=4503599627370496,o=52-o,o>0){for(q.multiply(0,s),a=e;a>=7;)q.multiply(1e7,0),a-=7;for(q.multiply(q.pow(10,a,1),0),a=o-1;a>=23;)q.divide(1<<23),a-=23;q.divide(1<<a),q.multiply(1,1),q.divide(2),i=q.numToString()}else q.multiply(0,s),q.multiply(1<<-o,0),i=q.numToString()+"0.00000000000000000000".slice(2,2+e);return e>0?(u=i.length,i=e>=u?r+"0.0000000000000000000".slice(0,e-u+2)+i:r+i.slice(0,u-e)+"."+i.slice(u-e)):i=r+i,i}},Z);var W=a.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?!function(){var t="undefined"==typeof/()??/.exec("")[1];a.split=function(e,n){var r=this;if("undefined"==typeof e&&0===n)return[];if("[object RegExp]"!==d.call(e))return W.call(this,e,n);var i,o,s,a,u=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),c=0;for(e=new RegExp(e.source,l+"g"),r+="",t||(i=new RegExp("^"+e.source+"$(?!\\s)",l)),n="undefined"==typeof n?-1>>>0:_.ToUint32(n);(o=e.exec(r))&&(s=o.index+o[0].length,!(s>c&&(u.push(r.slice(c,o.index)),!t&&o.length>1&&o[0].replace(i,function(){for(var t=1;t<arguments.length-2;t++)"undefined"==typeof arguments[t]&&(o[t]=void 0)}),o.length>1&&o.index<r.length&&h.apply(u,o.slice(1)),a=o[0].length,c=s,u.length>=n)));)e.lastIndex===o.index&&e.lastIndex++;return c===r.length?(a||!e.test(""))&&u.push(""):u.push(r.slice(c)),u.length>n?u.slice(0,n):u}}():"0".split(void 0,0).length&&(a.split=function(t,e){return"undefined"==typeof t&&0===e?[]:W.call(this,t,e)});var X=a.replace,Q=function(){var t=[];return"x".replace(/x(.)?/g,function(e,n){t.push(n)}),1===t.length&&"undefined"==typeof t[0]}();Q||(a.replace=function(t,e){var n=y(e),r=g(t)&&/\)[*?]/.test(t.source);if(n&&r){var i=function(n){var r=arguments.length,i=t.lastIndex;t.lastIndex=0;var o=t.exec(n)||[];return t.lastIndex=i,o.push(arguments[r-2],arguments[r-1]),e.apply(this,o)};return X.call(this,t,i)}return X.call(this,t,e)});var te=a.substr,ee="".substr&&"b"!=="0b".substr(-1);T(a,{substr:function(t,e){return te.call(this,0>t&&(t=this.length+t)<0?0:t,e)}},ee);var ne="	\n\f\r   ᠎             　\u2028\u2029﻿",re="​",ie="["+ne+"]",oe=new RegExp("^"+ie+ie+"*"),se=new RegExp(ie+ie+"*$"),ae=a.trim&&(ne.trim()||!re.trim());T(a,{trim:function(){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(oe,"").replace(se,"")}},ae),(8!==parseInt(ne+"08")||22!==parseInt(ne+"0x16"))&&(parseInt=function(t){var e=/^0[xX]/;return function(n,r){return n=String(n).trim(),Number(r)||(r=e.test(n)?16:10),t(n,r)}}(parseInt))})},{}],8:[function(e,n,r){function i(t){for(var e=[],n=t[1];n<=t[1]+5;n++)for(var r=t[0];r<=t[0]+5;r++)e.push([r,n]);return e}e("es5-shim"),r.Teams=["bl","br","tr","tl"],r.Messages={},r.Events={GAME_START:"game.start",GAME_WON:"game.won",PLAYER_JOIN:"player.join",TURN_BEGIN:"player.turn.begin",TURN_END:"player.turn.end",DICE_ROLL:"player.turn.rollDice",REPEAT_TURN:"player.turn.repeat",PLAYER_ACTIONS:"player.actions",TOKEN_BORN:"token.born",TOKEN_MOVE_TO:"token.moveTo",TOKEN_KILLED:"token.killed",TOKEN_BLOCKADE:"token.blockade",TOKEN_BLOCKED:"token.blocked",TOKEN_ASCEND:"token.ascend",OVER_SHOOT:"token.overShotAscension",ERROR:"error"},r.ActionTypes={BORN:"born",MOVE_BY:"moveBy",KILL_MOVE:"killMove",CREATE_BLOCKADE:"createBlockade",ASCEND:"ascend"};for(var o=r.Grid={path:[[7,1],[8,1],[9,1],[9,2],[9,3],[9,4],[9,5],[9,6],[10,7],[11,7],[12,7],[13,7],[14,7],[15,7],[15,8],[15,9],[14,9],[13,9],[12,9],[11,9],[10,9],[9,10],[9,11],[9,12],[9,13],[9,14],[9,15],[8,15],[7,15],[7,14],[7,13],[7,12],[7,11],[7,10],[6,9],[5,9],[4,9],[3,9],[2,9],[1,9],[1,8],[1,7],[2,7],[3,7],[4,7],[5,7],[6,7],[7,6],[7,5],[7,4],[7,3],[7,2]],center:[[7,7],[8,7],[9,7],[7,8],[8,8],[9,8],[7,9],[8,9],[9,9]],switchPoint:{bl:[8,15],br:[15,8],tr:[8,1],tl:[1,8]},ascendingPoint:{bl:[8,9],br:[9,8],tr:[8,7],tl:[7,8]},heaven:{bl:[[8,14],[8,13],[8,12],[8,11],[8,10]],br:[[14,8],[13,8],[12,8],[11,8],[10,8]],tl:[[2,8],[3,8],[4,8],[5,8],[6,8]],tr:[[8,2],[8,3],[8,4],[8,5],[8,6]]},startPoint:{bl:[7,14],br:[14,9],tr:[9,2],tl:[2,7]},teamAreas:{tl:i([1,1]),tr:i([10,1]),bl:i([1,10]),br:i([10,10])},allCordsForTeam:{},allCordsForHeaven:{}},s=0;3>=s;s++)t=r.Teams[s],r.Grid.allCordsForTeam[t]=[o.startPoint[t]].concat(o.heaven[t]).concat(o.teamAreas[t]),r.Grid.allCordsForHeaven[t]=[o.switchPoint[t]].concat(o.heaven[t]).concat([o.ascendingPoint[t]])},{"es5-shim":7}],9:[function(t,e,n){function r(t){this.options=t||{},this.rolled=this.options.rolled||!1}n.Dice=r,r.prototype.roll=function(){return this.rolled===!1&&(this.rolled=Math.floor(6*Math.random())+1),this.rolled}},{}],10:[function(t,e,n){function r(t){this.options=t||{},this.players=[],this.started=!1,this.currentPlayersTurn="",this.won=!1,i.call(this),this._attachEvents(this.options.events),this.options.state&&this._setState(this.options.state)}var i=t("events").EventEmitter,o=t("./player").Player,s=t("./constants"),a=s.Events,u=t("util").inherits;u(r,i),n.Game=r,r.prototype.state=function(){return this._attributes()},r.prototype._setState=function(t){var e=this;this.started=t.started,this.won=t.won,this.currentPlayersTurn=t.currentPlayersTurn,this.players=t.players.map(function(t){return o.build(t,e)}),this.resumeGame()},r.prototype._attributes=function(){return{won:this.won,started:this.started,currentPlayersTurn:this.currentPlayersTurn,players:this.players.map(function(t){return t.attributes()})}},r.prototype._attachEvents=function(t){var e;if(void 0!==typeof t)for(e in t)this.on(e,t[e])},r.prototype.addPlayer=function(t){this.players.length<=3&&(t.joinGame(this),t.setTeam(s.Teams[this.players.length]),this.players.push(t),this.emit(a.PLAYER_JOIN,{player:t}))},r.prototype.joinGame=function(){},r.prototype.start=function(){var t=0;return this.started||(this.players.forEach(function(e){e.getReady()&&t++}),this.players.length?this.players.length!=t?this.emit(a.ERROR,{message:"Not all players are ready"}):(this.started=!0,this.emit(a.GAME_START),this._loop()):this.emit(a.ERROR,{message:"Not enough players to start game"})),this},r.prototype._loop=function(){var t=this.playerTokensAscended();if(t)this.emit(a.GAME_WON,{player:t});else{var e=this.nextPlayersTurn();this.invokeTurn(e)}},r.prototype.continueGame=function(){this._loop()},r.prototype.resumeGame=function(){var t=this;this.players.some(function(e){return e.team===t.currentPlayersTurn?(e.beginTurn(),e):void 0})},r.prototype.invokeTurn=function(t){return this.currentPlayersTurn=t.team,t.beginTurn()},r.prototype.nextPlayersTurn=function(){var t;if(this.currentPlayersTurn){var e=this.players.map(function(t){return t.team}).indexOf(this.currentPlayersTurn);t=e!==this.players.length-1?this.players[e+1]:this.players[0]}else t=this.players[0];return t},r.prototype.findTokenAt=function(t,e){var n=(this.players,!1);return this.players.some(function(r){return e&&r.team===e.team?!1:n=r.tokenLocatedAt(t)}),n},r.prototype.playerTokensAscended=function(){var t,e=this.players;for(t=0;t<e.length;t++)if(player=e[t],player.allTokensAscended())return player;return!1},r.prototype.anyBlockadeIn=function(t,e){var n,r,i=this.players;for(r=0;r<i.length;r++)if(player=i[r],(!e||player.team!==e.team)&&(n=player.hasBlockadeAt(t)))return n;return!1}},{"./constants":8,"./player":11,events:2,util:6}],11:[function(t,e,n){function r(t){this.metadata=t,this._ready=!1,this.game=!1,this.team="",this._tokens=[],this.blockades={}}var o=t("./constants"),s=t("./token").Token,a=o.Events;n.Player=r,r.build=function(t,e){var n=new r;return n.metadata=t.metadata,n._ready=t.ready,n.team=t.team,n.game=e,t.tokens.forEach(function(t){n._tokens.push(s.build(t,n))}),n},r.prototype.attributes=function(){return{metadata:this.metadata,ready:this._ready,team:this.team,tokens:this._tokens.map(function(t){return t.attributes()})}},r.prototype.setTeam=function(t){this.team=t,this.createTokensForTeam()},r.prototype.createTokensForTeam=function(){var t;for(t=0;3>=t;t++)this._tokens.push(new s({player:this,id:t}))},r.prototype.readyUp=function(){this.ready=!0},r.prototype.getReady=function(){return this.ready},r.prototype.getActionsByDice=function(t){var e=this,n=t.rolled,r=this.generatePossibleActions(n);r.length?this.game.emit(a.PLAYER_ACTIONS,{player:this,actions:r,callback:function(t){e.executeAction(t)}}):this.endTurn()},r.prototype.beginTurn=function(){var t=this;this.game.emit(a.TURN_BEGIN,{player:this}),this.game.emit(a.DICE_ROLL,{player:this,callback:function(e){t.getActionsByDice(e)}})},r.prototype.generatePossibleActions=function(t){var e=[];return this._tokens.forEach(function(n){var r=n.getPossibleAction(t);r&&e.push(r)}),e},r.prototype.executeAction=function(t){t.token.executeAction(t),6===t.rolled?(this.game.emit(a.REPEAT_TURN,{player:this}),this.beginTurn()):this.endTurn()},r.prototype.endTurn=function(){this.game.emit(a.TURN_END,{player:this}),this.game.continueGame()},r.prototype.joinGame=function(t){return this.game=t,!0},r.prototype.registerBlockade=function(t,e){if(e.length>=2)for(this.blockades[t]={tokens:e},i=0;i<e.length;i++)e[i].inBlockade=!0;
else e[0]&&(e[0].inBlockade=!1),delete this.blockades[t]},r.prototype.allTokensAscended=function(){var t,e=0;for(i=0;i<this._tokens.length;i++)t=this._tokens[i],t.ascended&&e++;return e===this._tokens.length},r.prototype.allyTokensAt=function(t,e){var n=this._tokens.filter(function(n){return e&&n.id===e.id?void 0:n.atCords(t)});return n.length?n:!1},r.prototype.hasBlockadeAt=function(t){var e,n;for(e=0;e<t.length;e++)if(n=t[e],this.blockades[n])return this.blockades[n];return!1},r.prototype.tokenLocatedAt=function(t,e){var n=!1;return this._tokens.some(function(r){return e&&r.id===e.id?void 0:(r.atCords(t)&&(n=r),n)}),n},r.prototype.blockadeAhead=function(t){return this.game.anyBlockadeIn(t,this)},r.prototype.enemyTokenAt=function(t){return this.game.findTokenAt(t,this)}},{"./constants":8,"./token":12}],12:[function(t,e,n){function r(t){this.player=t.player,this.id=t.id,this.game=this.player.game,this.team=this.player.team,this.active=!1,this.isOnHeavenPath=!1,this.inBlockade=!1,this.cords={x:0,y:0},this.ascended=!1}var i=t("./constants"),o=i.Grid,s=i.ActionTypes,a=i.Events,u=t("./utils");n.Token=r,r.build=function(t,e){var n=new r({player:e,id:t.id});return t.active&&(n.born(),n.moveTo(t.cords)),n},r.prototype.attributes=function(){return{id:this.id,team:this.team,active:this.active,isOnHeavenPath:this.isOnHeavenPath,inBlockade:this.inBlockade,cords:this.cords,ascended:this.ascended}},r.prototype.atCords=function(t){return[this.cords.x,this.cords.y].toString()===t.toString()},r.prototype.getPossibleAction=function(t){var e,n,r,i,o,a={};return e=this._forecastCords(t),r=this._blockadeAhead(t),i=this._willOverShootAscendingPoint(t),r||i||this.ascended||(a.forecast=e,a.token=this,a.rolled=t,this.active?(n=this.player.enemyTokenAt(e),allyTokens=this.player.allyTokensAt(e,this),o=this._willAscend(e),o?a.type=s.ASCEND:n?(a.type=s.KILL_MOVE,a.enemyToken=n):allyTokens?(a.type=s.CREATE_BLOCKADE,a.allyTokens=allyTokens):a.type=s.MOVE_BY):6===t&&(a.type=s.BORN),!a.type)?!1:a},r.prototype.executeAction=function(t){switch(t.type){case s.BORN:this.born();break;case s.MOVE_BY:case s.CREATE_BLOCKADE:case s.KILL_MOVE:case s.ASCEND:this.moveTo({x:t.forecast[0],y:t.forecast[1]})}},r.prototype.born=function(){var t=o.startPoint[this.team];this.active=!0,this.game.emit(a.TOKEN_BORN,{token:this}),this.moveTo({x:t[0],y:t[1]})},r.prototype._forecastCords=function(t){var e,n,r,i=[this.cords.x,this.cords.y],s=this._findAllCordsAhead(t),a=o.path;return this.active?(e=u.findCordsInArray(o.switchPoint[this.team],s),this.isOnHeavenPath&&(a=o.allCordsForHeaven[this.team]),-1!==e&&e!==s.length-1?r=this._switchToHeavenPath(e+1,s.length):(n=u.findCordsInArray(i,a),n+=t,n>a.length-1&&(n-=a.length),r=a[n])):6===t&&(r=o.startPoint[this.team]),r},r.prototype._findAllCordsAhead=function(t){var e,n,r=[this.cords.x,this.cords.y],i=[];return this.active?(e=u.findCordsInArray(r,o.path),n=e+t,e+=1,n+=1,i=o.path.slice(e,n),n>o.path.length-1&&(n-=o.path.length,i=i.concat(o.path.slice(0,n)))):6===t&&(i=[o.startPoint[this.team]]),i},r.prototype._blockadeAhead=function(t){var e=this.player.blockadeAhead(this._findAllCordsAhead(t));return e&&this.game.emit(a.TOKEN_BLOCKED,{token:this,blockade:e}),e},r.prototype._willAscend=function(t){return t===o.ascendingPoint[this.team]},r.prototype._willOverShootAscendingPoint=function(t){var e=o.allCordsForHeaven[this.team],n=[this.cords.x,this.cords.y],r=u.findCordsInArray(n,e);r+=1;var i,s=e.length-r;return this.isOnHeavenPath&&t>s?(i=t-s,this.game.emit(a.OVER_SHOOT,{token:this,by:i}),!0):!1},r.prototype._createBlockade=function(t,e){e.push(this),this.player.registerBlockade(t,e),this.game.emit(a.TOKEN_BLOCKADE,{tokens:e,cords:t})},r.prototype._switchToHeavenPath=function(t,e){var n,r=o.heaven[this.team];return n=r[e-1-t]},r.prototype.moveBy=function(t){var e=this._forecastCords(t);this.moveTo({x:e[0],y:e[1]})},r.prototype.moveTo=function(t){var e=[t.x,t.y],n=this.player.enemyTokenAt(e),r=this.player.allyTokensAt(e,this),i=this._onHeavenPath(e),s=o.ascendingPoint[this.team];this.inBlockade&&this._leaveBlockade(),n&&this._kill(n),r&&this._createBlockade(e,r),i&&(this.isOnHeavenPath=!0),e.toString()===s.toString()&&this._ascend(),this.cords.x=t.x,this.cords.y=t.y,this.game.emit(a.TOKEN_MOVE_TO,{token:this,cords:this.cords})},r.prototype._leaveBlockade=function(){var t,e=[this.cords.x,this.cords.y];this.inBlockade=!1,t=this.player.allyTokensAt(e,this),this.player.registerBlockade(e,t)},r.prototype._ascend=function(){this.ascended=!0,this.game.emit(a.TOKEN_ASCEND,{token:this})},r.prototype._onHeavenPath=function(t){var e=o.allCordsForHeaven[this.team],n=u.findCordsInArray(t,e);return-1!==n},r.prototype.killedBy=function(){this.active=!1,this.cords={x:0,y:0}},r.prototype._kill=function(t){t.killedBy(this),this.game.emit(a.TOKEN_KILLED,{killed:t,by:this})}},{"./constants":8,"./utils":13}],13:[function(t,e,n){var r=t("./constants"),i=r.Grid,o=r.Teams,s=n.findCordsInArray=function(t,e){return e.map(function(t){return t.toString()}).indexOf(t.toString())};n.cordBelongsTo=function(t){for(var e=0;3>=e;e++)if(-1!==s(t,i.allCordsForTeam[o[e]]))return o[e];return!1}},{"./constants":8}]},{},[1])(1)});